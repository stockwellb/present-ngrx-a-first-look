<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section>
            <p>unboxing</p>
            <h1>@ngrx/store</h1>
        </section>
        <section>
            <p>@ngrx/<span style="color:palevioletred">store</span></p>
            <aside class="notes">
                <p>@ngrx/store is a controlled state container designed to help write performant, consistent
                    applications on top of Angular.</p>
            </aside>
        </section>
        <section>
            <p><span style="color:cornflowerblue">State</span> management</p>
            <aside class="notes">
                <p>Avoid spreading our state all over the application.</p>
            </aside>
        </section>
        <section>
            <p>Designed for <span style="color:palevioletred">Angular</span></p>
            <aside class="notes">
                <p>Written by angular team members for Angular.</p>
                <ul>
                    <li>It's a first class framework</li>
                    <li>@ngrx/router was absorbed by the Angular team</li>
                </ul>
            </aside>
        </section>
        <section>
            <p>Powered by <span style="color:cornflowerblue">RxJs</span></p>
            <aside class="notes">
                <p>Reactive extension for JavaScript.</p>
            </aside>
        </section>
        <section>
            <p>Inspired by <span style="color:palevioletred">Redux</span></p>
            <aside class="notes">
                <p>A flux pattern</p>
            </aside>
        </section>
        <section>
            <p>RxJs?</p>
            <aside class="notes">
                <p>RxJS or Reactive Extensions for JavaScript</p>
            </aside>
        </section>
        <section>
            <p>RxJs<span style="color:cornflowerblue"> transforms,</span><span
                    style="color:palevioletred"> composes,</span> and <span style="color:lightgreen"> queries</span>
                streams of data</p>
        </section>
        <section>
            <aside>
                <blockquote class="twitter-tweet" data-lang="en"><p lang="und" dir="ltr"><a
                        href="https://t.co/aIQTdbFPrA">pic.twitter.com/aIQTdbFPrA</a></p>&mdash; Todd Motto (@toddmotto)
                    <a href="https://twitter.com/toddmotto/status/687104621421158400">January 13, 2016</a></blockquote>
                <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
            </aside>
        </section>
        <section>
            <p>With rxjs, everything is a <span style="color:cornflowerblue">stream</span>.</p>
        </section>
        <section>
            <p>Here's an <span style="color:palevioletred">example</span></p>
        </section>
        <section data-background-iframe="https://embed.plnkr.co/IJikndZI4FflMWYiuBZH/" data-background-interactive>
        </section>
        <section>
            <p>Redux?</p>
        </section>
        <section>
            <p>It's an <span style="color:cornflowerblue">implementation</span> of <span style="color:palevioletred">Flux</span>
            </p>
        </section>
        <section>
            <p><span style="color:lightgreen">Flux</span> is an application <span style="color:cornflowerblue">architecture</span>
            </p>
            <img src="flux-800x167.png">
        </section>
        <section>
            <p>(<span style="color:palevioletred">state</span>, <span style="color:cornflowerblue">action</span>) =>
                <span style="color:lightgreen">state</span>
            <p>
        </section>
        <section>
            <p><span style="color:palevioletred">Reduction</span></p>
            <aside class="notes">
                <p>Redux is named after the concept of reduce.</p>
                <ul>
                    <li>reducing app input stream to immutable state</li>
                    <li>it's actually more like scan because of immediate results</li>
                </ul>
            </aside>
        </section>
        <section>
            <p>Core <span style="color:palevioletred">tenets</span> of @ngrx/<span
                    style="color:cornflowerblue">store</span></p>
        </section>
        <section>
            <p><span style="color:palevioletred">State</span> is a single <span
                    style="color:lightgreen">immutable</span> data structure.</p>
        </section>
        <section>
            <p><span style="color:palevioletred">Actions</span> describe state <span
                    style="color:lightgreen">changes</span>.</p>
        </section>
        <section>
            <p>Pure functions or <span style="color:palevioletred">reducers</span> take <span
                    style="color:cornflowerblue">state</span> and an <span style="color:lightgreen">action</span> to
                compute new <span style="color:cornflowerblue">state</span>.</p>
            <aside class="notes">
                <p>A function whose return value is determined only by its input values, with no observable side-effects.</p>
            </aside>
        </section>
        <section>
            <p>(<span style="color:palevioletred">state</span>, <span style="color:cornflowerblue">action</span>) =>
                <span style="color:lightgreen">state</span>
            <p>
                <aside class="notes">
            <p>Remember this?</p>
            </aside>
        </section>
        <section>
            <p>State accessed with the Store, an <span style="color:palevioletred">observable</span> of state and an
                <span style="color:cornflowerblue">observer</span> of actions.</p>
            <aside class="notes">
                <p>This is where RxJs is used.</p>
                <ul>
                    <li>The store is an RxJs Subject</li>
                    <li>The dispatch is an RxJs Subject</li>
                    <li>You can observe store, store observes actions</li>
                </ul>
            </aside>
        </section>
        <section>
            <p>class <span style="color:yellow">AddItemAction</span> implements <span style="color:yellow">Action</span>
            </p>
        </section>
        <section>
            <p>{ <span style="color:mediumpurple">type:</span> <span style="color:lightgreen">'ADD_ITEM'</span>, <span
                    style="color:mediumpurple">payload:</span> item }</p>
            <aside class="notes">
                <p>The action is generally a type and a payload</p>
            </aside>
        </section>
        <section>
            <p>store.<span style="color:yellow">dispatch</span>(<span style="color:mediumpurple">new</span>
                AddItemAction(item));</p>
            <aside class="notes">
                <p>The dispatcher sends an action to the reducer</p>
            </aside>
        </section>
        <section>
            <p>{ <span style="color:mediumpurple">ids:</span> [1,2], <span style="color:mediumpurple">entities:</span>
                {1: 'one', 2: 'two'} }</p>
            <aside class="notes">
                <p>State is established in the reducers.</p>
                <p>Single, immutable state tree updated only through explicitly defined and dispatched actions</p>
            </aside>
        </section>
        <section>
            <p>case <span style="color:yellow">ADD_ITEM</span>: { <span style="color:lightgreen">//build new state</span> }</p>
            <aside class="notes">
                <p>The reducer takes the existing state, an action and returns a new state</p>
            </aside>
        </section>
        <section>
            <p><span style="color:mediumpurple">default:</span> { <span style="color:mediumpurple">return</span> state; }</p>
            <aside class="notes">
                <p>If there's no matching action we always return the existing state</p>
            </aside>
        </section>
        <section>
            <p><span style="color:cornflowerblue">Immutable</span> state</p>
            <aside class="notes">
                <ul>
                    <li>Immutability</li>
                    <li>Single source of truth</li>
                    <li>Contract</li>
                    <li>Could use immutable.js</li>
                </ul>
            </aside>
        </section>
        <section>
            <p><span style="color:mediumpurple">ids</span>: [...state.ids, ...ids]</p>
            <aside class="notes">
                <p>Notice we do not mutate</p>
            </aside>
        </section>
        <section>
            <p><span style="color:mediumpurple">entities</span>: { ...state.entities, [id: item.id]: item }</p>
            <aside class="notes">
                <p>Adding an item</p>
            </aside>
        </section>
        <section>
            <p><span style="color:yellow">getItemsState</span> = (state: State) => state.<span style="color:yellow">entities</span></p>
            <aside class="notes">
                <p>Selectors can be nested/composed and only recomputed if
                    their result has changed since the last time they where called</p>
                <ul>
                    <li>I used the selector library 'reselect'</li>
                </ul>
            </aside>
        </section>
        <section>
            <p><span style="color:yellow">createSelector</span>(...inputSelectors | [inputSelectors], <span style="color:palevioletred">resultFunc</span>)</p>
        </section>
        <section>
            <p><span style="color:yellow">getFilteredItems</span> = <span style="color:palevioletred">createSelector</span>(getItemsState, filter, (itemsState, filter) => {}</p>
        </section>
        <section>
            <p>store.<span style="color:yellow">select</span>(getFilteredItems())</p>
        </section>
        <section>
            <p><span style="color:cornflowerblue">Reducers</span> are combined into <span style="color:palevioletred">one</span></p>
            <aside class="notes">
                <p>Reducers are combined into one reducer that will be passed into @ngrx/store.</p>
            </aside>
        </section>
        <section>
            <p>StoreModule.<span style="color:yellow">provideStore</span>(reducer)</p>
            <aside class="notes">
                <p>Here we pass our top level reducer into the store module.</p>
            </aside>
        </section>
        <section>
            <p>State management <span style="color:cornflowerblue">strategies</span></p>
            <aside class="notes">
                <p>state design is very important</p>
            </aside>
        </section>
        <section>
            <p>Data should be <span style="color:palevioletred">normalized</span>.</p>
        </section>
        <section>
            <p>Only store an object once. <span style="color:cornflowerblue">Reference</span> it's id.</p>
        </section>
        <section>
            <p>Usually <span style="color:palevioletred">one</span> reducer per <span style="color:cornflowerblue">type</span>.</p>
        </section>
        <section>
            <p><span style="color:palevioletred">Avoid</span> arrays for object collections.</p>
        </section>
        <section>
            <p>Make use of <span style="color:palevioletred">map</span>, <span style="color:cornflowerblue">filter</span> and <span style="color:lightgreen">reduce</span></p>
        </section>
        <section>
            <p><span style="color:yellow">items</span> = ids.<span style="color:yellow">map</span>(id => state.<span style="color:yellow">entities</span>[id])</p>
        </section>
        <section>
            <p>@ngrx/<span style="color:cornflowerblue">effects</span></p>
        </section>
        <section>
            <p>Maybe <span style="color:palevioletred">next</span> <span style="color:cornflowerblue">time</span></p>
        </section>
        <section>
            <p>Questions</p>
            <p class="fragment"><span style="color:lightgreen">Remember</span>, I'm a @ngrx/<span style="color:cornflowerblue">store</span> noob.</p>
        </section>
    </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
        transition: 'none',
//                parallaxBackgroundImage: 'parallax.jpg',
//
//                // Parallax background size
//                parallaxBackgroundSize: '3840px 1200px',

        dependencies: [
            {src: 'plugin/markdown/marked.js'},
            {src: 'plugin/markdown/markdown.js'},
            {src: 'plugin/notes/notes.js', async: true},
            {
                src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            }
        ]
    });
</script>
</body>
</html>
